This is the irrigation controller

It uses a number of DS2413 1-wire dual channel GPIO chips to drive triacs to operate
valves and pumps. It also optionally monitors 2 temperature sensors to implement 
a preset frost protection program and monitors the current drawn by the vavles to 
ensure they are connected correctly.

The 1-wire bus with these devices on it is driven from a DS2480B UART to 1-wire Master 
Controller chip which is connected to one of the serial ports available on a modified
Linksys WRT54GL wireless router.

The Linksys router has Open Source software available for it that not only frees the 
user from the limits of the manufacturers code but also provides the cross compile 
environment to allow addition functions to be added by anyone.
See http://openwrt.org

The following files are from the owpd310r2 package from the public domain
software release from Dallas/Maxim - the manufacturers of the 1-wire devices.
See http://www.maxim-ic.com/products/ibutton/software/1wire/wirekit.cfm

These files form a set of reusable modules that address the various parts of the
one wire system - for example talking to the DS2480B UART to 1-wire master chip
or providing the hooks for either windows, linux etc.

   crcutil.c
   ds2480ut.c
   findtype.c
   ioutil.c
   linuxlnk.c
   owerr.c
   owllu.c
   ownetu.c
   owsesu.c
   owtrnu.c
   swt3A.c



This file, which provides the interface to the DS2438 Battery Monitor chip has been
substantially hacked about (pretty much a total rewrite) to access ALL of the registers 
of the chip, not just those used by the humidity gauge it was originally written for.

   atod26.c


These files implement an embedded http server with simple callbacks to the main code. It
is licensed under the MIT License which basically says do what you like so long as the 
license conditions remain in the files! I'm using version 5.1 at present.

   mongoose.c
   mongoose.h

All the above files contains their own license conditions.


These files are totally new and provide all of the AJAX web interface, the onewire interface,
statistics, time event queueing, scheduling, command line parsing and error handling.
They are released under the GNU Public License version 2.

   irr_actions.c
   irr_chanmap.c
   irr_onewire.c
   irr_parse.c
   irr_queue.c
   irr_schedule.c
   irr_stats.c
   irr_utils.c
   irr_web.c
   irrigate.c

External libraries to parse and generate JavaScript Object Notation (JSON) data for the AJAX 
methods used in the web interface. The javascript widgets for timeline support are from 
the CHAPS links library and are available under the Apache license. Other javascript code has
been released to the public domain.

The makefile will do a native build under Linux, I've no Windows development machine but changing
linuxlnk.c to the equivalent file for your Operating System should be all that is required
to use this software in another environment.

Compiling for the Linksys router is simple. Tell the 'make' system where the openwrt compiler 
is and what its' prefix is - something like:
   export CROSS_COMPILE="/home/g8ecj/storage/src/kamikaze_7.09/staging_dir_mipsel/bin/mipsel-linux-uclibc"
and then type 'make'
Alternatively, a compressed file called openwrt provides the package makefile and control files 
for native packaging and installation.

$ ./irrigate --help
irrigate: Irrigation Controller Version 2.00 Copyright (c) 2009-2011 Robin Gilks
usage: ./irrigate [bcdfhlprstvx]

-a <file>, --file      access log file name
-b,        --background run in daemon mode
-c,        --config    configure zone mapping
-d <dir>,  --datapath  data file directory
-f <file>, --file      config file name
-l <int>,  --limit     degree-minutes before frost program runs
-m,        --monitor   check current drawn by solenoid valves
-p <int>,  --port      http port number
-r <dir>,  --root      http root directory
-s <dev>,  --serialport serial port device
-t <int>,  --threshold temperature below which frost protect operates
-v,        --version   useful version information
-x         --debug     debug mode
-h,        --help      this help screen

